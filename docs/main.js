(()=>{"use strict";class t{constructor(){this.lastCalculation=void 0,this.currentInput="",this.waitingForInput=!0}operator(t){return"-"===t&&this.waitingForInput?this.input(t):isNaN(this.currentInput)?void 0:this.newCalculation(t)}newCalculation(t){return isNaN(this.currentInput)?this.currentInput:(this.lastCalculation&&this.lastCalculation.operand2?(this.lastCalculation=new e(this.lastCalculation,t),this.lastCalculation.operand2=this.currentInput):this.lastCalculation?(this.lastCalculation.operand2=this.currentInput,this.lastCalculation=new e(this.lastCalculation,t)):this.lastCalculation=new e(this.currentInput,t),this.currentInput="",this.waitingForInput=!0,this.lastCalculation.getResult())}equals(){if(this.lastCalculation.operand2){const t=new e(this.lastCalculation,this.lastCalculation.operator);t.operand2=this.lastCalculation.operand2,this.lastCalculation=t}else this.lastCalculation.operand2=this.currentInput,this.currentInput="";return this.lastCalculation.getResult()}input(t){return this.waitingForInput&&(this.waitingForInput=!1),"0"!==t||"0"!==this.currentInput&&"-0"!==this.currentInput?((!isNaN(t)||"-"===t||"."===t&&!this.currentInput.includes("."))&&this.currentInput.length<=10&&(this.currentInput=this.currentInput+t),this.currentInput):this.currentInput}clear(){return this.currentInput="",this.currentInput}clearEverything(){return this.lastCalculation=void 0,this.currentInput="",this.currentInput}removeLast(){const t=this.currentInput.length;return t?(this.currentInput=this.currentInput.substr(0,t-1),this.currentInput):this.lastCalculation.getResult()}}class e{constructor(t,e){this.operand1=t,this.operator=e,this.operand2}get operand1(){return this._operand1 instanceof e?this._operand1.getResult():this._operand1}set operand1(t){t instanceof e?this._operand1=t:isNaN(t)?alert("INTERNAL ERROR! Please refresh the page."):this._operand1=parseFloat(t)}get operator(){return this._operator}set operator(t){["+","-","*","/"].includes(t)?this._operator=t:alert("INTERNAL ERROR! Please refresh the page.")}getResult(){if(!this.operand2)return this.operand1;switch(this.operator){case"+":return this.operand1+parseFloat(this.operand2);case"-":return this.operand1-parseFloat(this.operand2);case"*":return this.operand1*parseFloat(this.operand2);case"/":return this.operand1/parseFloat(this.operand2);default:return 0}}}new class{constructor(){this.calculator=new t,this.screen=document.querySelector(".calculator-screen"),this.clearButton=document.querySelector(".btn-danger"),this.initiateButtons(),this.initiateKeys()}initiateButtons(){document.querySelectorAll(".btn").forEach((t=>{if(t.className.includes("operator"))t.onclick=()=>this.operatorClicked(t.value);else switch(t.value){case"clear":t.onclick=()=>this.clearClicked();break;case"=":t.onclick=()=>this.equalsClicked();break;default:t.onclick=()=>this.inputClicked(t.value)}}))}initiateKeys(){document.addEventListener("keypress",(t=>{["1","2","3","4","5","6","7","8","9","0","."].includes(t.key)?this.inputClicked(t.key):["+","-","*","/"].includes(t.key)?this.operatorClicked(t.key):["c","C","Escape"].includes(t.key)?this.clearClicked():"Backspace"===t.key?this.backspaceClicked():"Enter"===t.key&&this.equalsClicked()}))}operatorClicked(t){this.setScreen(this.calculator.operator(t))}clearClicked(){"C"===this.clearButton.textContent?(this.screen.value=this.calculator.clear(),this.clearButton.textContent="CE"):(this.screen.value=this.calculator.clearEverything(),this.clearButton.classList.add("disabled"))}backspaceClicked(){this.screen.value=this.calculator.removeLast()}equalsClicked(){this.setScreen(this.calculator.equals())}inputClicked(t){this.screen.value=this.calculator.input(t),this.screen.value&&(this.clearButton.textContent="C",this.clearButton.classList.remove("disabled"))}setScreen(t){this.screen.value=t.toString().length>11?t.toExponential(6):t}}})();